<!DOCTYPE html>
<html>
<head>
    <title>Web API test</title>
	<meta charset="utf-8" />
</head>
<body>
    <script src="Scripts/jquery-3.1.1.min.js"></script>
    <script>
        /*var testVariable = $.getJSON("api/QuestionsApi/1", function (data) {
            console.log("GET successful!");
            console.log(data);
        }); */
        console.log("testpage script started!");
        // AnswerDTO object constructor
        var AnswerDTO = function (nQuestionID, nQuestionSetIndex, nChosenQuestionIndex, nValue, nQuestionMethodID) {
            this.QuestionID = nQuestionID;
            this.QuestionSetIndex = nQuestionSetIndex;
            this.ChosenQuestionIndex = nChosenQuestionIndex;
            this.Value = nValue;
            this.QuestionMethodID = nQuestionMethodID;
        };

        var newAnswers = [new AnswerDTO(2, 2, 2, 3, 3),
            new AnswerDTO(5, 1, 1, 4, 5),
            new AnswerDTO(7, 1, 2, 4, 2),
            new AnswerDTO(3, 2, 1, 1, 1)];

        for (var i = 0; i < newAnswers.length; i++) {
            console.log("newAnswers[" + i + "].QuestionID: " + newAnswers[i].QuestionID);
            console.log("newAnswers[" + i + "].Value: " + newAnswers[i].Value);
            console.log("newAnswers[" + i + "].ChosenQuestionIndex: " + newAnswers[i].ChosenQuestionIndex);
            console.log("newAnswers[" + i + "].QuestionSetIndex: " + newAnswers[i].QuestionSetIndex);
            console.log("newAnswers[" + i + "].QuestionMethodID: " + newAnswers[i].QuestionID);
        }
        
        /*
        $.post("api/postsurveyanswers", newAnswers,
        function (data, status) {
            console.log("Data: " + data + "\nStatus: " + status);
        });
        */
        $.ajax({
            url: "api/postsurveyanswers",
            type: 'POST',
            data: JSON.stringify(newAnswers),
            dataType: 'json',
            contentType: 'application/json',
            crossDomain: true,
            cache: false,
            success: function (returnData) { console.log(returnData); }
        });
    </script>
</body>
</html>
